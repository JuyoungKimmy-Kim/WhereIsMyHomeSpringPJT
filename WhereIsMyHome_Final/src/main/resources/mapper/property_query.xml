<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycom.myhome.address.PropertyDao"> <!--  @Mapper annotation 있는 dao -->
	<!-- 동 이름으로 집 정보 받아오기-->
	<select id="searchByDong" resultType="com.mycom.myhome.address.PropertyDto">
		select hd.no, hd.dong, hd.code, hd.AptName, hd.dealAmount, hd.dealYear,
			   hd.dealMonth, hd.dealDay, hd.area,
			   hi.lat, hi.lng
		  from housedeal hd join houseinfo hi
		 where hd.AptName=hi.AptName and hd.dong=#{dongName}
		 limit 50
	</select>
	
	<!--  구군 코드 정보로 집 정보 받아오기  -->
	<select id="searchByGugunCode" resultType="com.mycom.myhome.address.PropertyDto">
		select hd.no, hd.dong, hd.code, hd.AptName, hd.dealAmount, hd.dealYear,
			   hd.dealMonth, hd.dealDay, hd.area,
			   hi.lat, hi.lng
		  from housedeal hd join houseinfo hi
		 where hd.AptName=hi.AptName and hd.code=#{gugunCode}
		 limit 50
	</select>
	
	<!--  아파트 이름으로 정보 받아오기 -->
	<select id="searchByApt" resultType="com.mycom.myhome.address.PropertyDto">
		select hd.no, hd.dong, hd.code, hd.AptName, hd.dealAmount, hd.dealYear,
			   hd.dealMonth, hd.dealDay, hd.area,
			   hi.lat, hi.lng
		  from housedeal hd join houseinfo hi
		 where hd.AptName = hi.AptName
		   and hd.AptName like concat('%',#{aptName},'%')
	</select>

</mapper>	